---
layout:     post
title:      计算机网络复习笔记-2
subtitle:   学习
date:       2018-12-26
author:     XHT
header-img: img/post-bg-universe.jpg
catalog: true
tags:
    - 计算机网络
---
## 分层带来的好处

> 各层之间是独立的

**每一层只实现一种相对独立的功能，并不需要知道它的下一层是如何实现的，我们只需要下一层的接口所提供的福利**

> 灵活性好

**当某一层的功能实现发生变化时，只要层间接口关系保持不变，则在这层以上或以下各层均不受影响**

> 结构上可分割

**各层都可以采用最合适的技术来实现**

> 易于实现和维护

**这种结构使得实现和调试一个庞大而又复杂的系统变得易于处理**

> 能促进标准化工作

1. **差错控制：使相应层次对等方的通信更加可靠**
2. **流量控制：发送端的发送速率必须使接收端来得及接受，不要太快**
3. **分段和重装： 发送端将要发送的数据块划分为更小的单位，在接收端再进行分用。在网络层实现**
4. **复用和分用： 发送端几个高层回话复用一条底层的连接，在接收端再进行分用，在物理层实现**
5. **连接建立和释放：交换数据前先建立一条逻辑连接，传输完毕后释放连接**

## 具有五种协议的体系结构

> 应用层

**应用层是体系结构中的最高层。应用层的任务是通过应用进程间的交互来完成特定网络应用。应用层协议的定义是应用进程间通信和交互的规则。这里的进程就是指主机中正在运行的程序。对于不同的网路应用层需要不同的应用层协议。在互联网中的应用层协议很多，如域名系统DNS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议，等等。我们把应用层交互的数据但愿成为报文（message）**

1. 传输基本单位为报文

> 运输层

**运输层的任务就是负责向两台主机中进程之间的通信提供通用的数据传输服务。由于一台主机可同时运行多个进程美因茨运输层有复用和奋勇的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用是运输层把收到的信息分别交付上面应用层中的相应过程。运输层它属于面向通信部分最高层，也是用户功能的最底层，运输层为端到端之间提供逻辑通信**

运输层主要使用以下两种协议：

- **传输控制协议TCP** ------提供面向连接的，可靠的数据传输服务，其数据传输的单位是报文段（尽管下层是不靠谱链接

- **用户数据报协议 UDP** ------提供无连接，尽最大女里的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是用户数据报

 1. TCP建立链接需要客户和服务器之间交换三个TCP报文段
 2. TCP释放链接过程需要四报文握手


 #### TCP如何在不可靠的数据链路层上实现可靠的交付服务？

 1. TCP将报文段进行分组，每个分组上有一个定时器，发送端每次将一个单独的分组发送之后，需要收到接收端的确认信息，发送端如若未收到确认信息，则进行该分组重发（可能是分组在数据链路层因为未通过检测被丢弃，可以因为线路堵塞超过定时器规定的时间**定时器的作用**）
 2. 接收到如果因收到因为超时重发的两个分组，则丢弃重复的分组
 3. 上述这种可靠协议常称为**自动重传请求ARQ**

 ***
> 网络层

**网络层负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫做IP数据报，或简称为数据报。**


1. 网络层传输的基本数据单位为IP数据报
2. 主要协议有IP协议，ICAP协议，ARP协议（地址解析协议），RARP协议（逆地址解析协议）
3. 网络层向上只提供简单灵活的，无连接的，尽最大努力交付的数据报服务
4. RIP和OSPF协议（开放最短路径优先）都是分布式网络选择协议
5. 划分子网和使用子网掩码增加了灵活性
6. 网络层还可以实现拥塞控制、网际互连等功能；



***
> 数据链路层

**数据链路层常简称为链路层，数据链路层将网络层交下来的IP数据报组装成帧，每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。通过这些控制信息，我们就可以从中提取出数据部分，上交给网络层。控制信息还可以用来检测所收到的帧有无差错。如有差错，数据链路就简单地丢弃这个除了出了差错的帧，以免继续在网络中传送下去白白浪费网络资源**



1. 数据链路层传送的协议数据单元是帧
2. 数据链路层在不可靠的物理介质上提供可靠的传输
3. 数据链路层的**三个基本问题包括封装成帧，透明传输，错误检测**
4. 点对点协议PPP是数据链路层使用最多的一种，还有CSMA/CD协议
5. 通过CRC（循环冗余检验）检测收到帧有无差错，有差错则丢弃

**CSMA/CD协议（载波监听多点接入/碰撞检测**

**总线上只要有一台计算机在发送数据，总线的传输资源就会被占用。因此，在同一时间只能允许一台计算机发送数据**

*多点接入* ———————说明这是总线型网络

*载波监听* ———————不管在发送前还是在发送中，每个站必须不停的检测信道（发送中监听是因为传播时延的存在

*碰撞检测* ———————边发送边监听，如果在发送中发送碰撞，停止发送，在等待一段随机的时间后重新进行发送（因为传播时延的存在，**电磁波在1km电缆上的传播时延约为5us，常把发送端到接收端的传播时延写作a（书上的符号不会打），则最迟需要经过2a的时间才能确认数据是否发生碰撞**

**在使用CSMA/CD协议时，一个站不可以同时发送/接收数据，所以这个以太网不可能进行全双工通信，只能进行双向交替通信（半双工通信）**

传送端到接收端的传播时延*2，这个时间段内，发送站无法确认数据是否成功发送（有无发生碰撞冲突）。我们把这个时间段称为争用期（也叫做碰撞窗口）。如果过了这个时间段还是没有检测到碰撞，则该次数据可以顺利发送完毕。

如果争用期内发生冲突碰撞，则使用**截断二进制指数退避**

1. 协议规定了基本退避时间为争用期2a，具体的争用期时间为51.2us。对于10Mb/s的以太网，在争用期可以发送512bit数据，所以也可以称为争用期是512比特时间
2. 我们可以从离散的整数集合**[0，1，3，4，....，（2^k）-1]**里随机取出一个数，记为r。重传应推后的时间就是r倍的争用期。整数集合里的k参数取值  **k=Min（重传次数，10）**
3. 重传达16次仍不能成功，则丢弃该帧，并向上层报告


**CRC（循环冗余检验）检测**

待添加
***
> 物理层

**在物理层上所传数据的单位是比特，01数据流。物理层要考虑用多大的电压代表“0”或“1”，以及接收方如何识别出发送方所发出的比特。**


> 封装演示

![](http://static.zybuluo.com/Rico123/5isp5b3mn3arj4157ohb9hwg/PDU%E5%B0%81%E8%A3%85%E5%AE%9E%E4%BE%8B.png)


> 总结

乘客：应用层

**应用层协议的内容，就是我们直接要使用的数据，也是整个网络传输要传递的内容。**

指挥调度：运输层

**运输层是体系结构的调度者，管理着数据的传输的一些策略。**

向导：网络层

**网络层的是体系结构的向导，负责找到要到达接收方的路径。**

交通工具：数据链路层

**数据链路层里的协议就是要使用的交通工具了。**

道路：物理层
